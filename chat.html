<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CN v2 C</title>
  <link rel="icon" type="image/x-icon" href="https://thomasd12111211.github.io/Icon/Icon.ico">
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    #chat { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll; background: #fff; margin-bottom: 10px; }
    .message { margin-bottom: 5px; }
    .name { font-weight: bold; color: #0066cc; }
    input, button { padding: 5px; font-size: 14px; }
  </style>
</head>
<body>

<h2>CN v2</h2>
<input type="text" id="username" placeholder="Enter your name">
<div id="chat"></div>
<input type="text" id="message" placeholder="Type a message">
<button onclick="sendMessage()">Send</button>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDf-Qc9nW8YfujTfoUcEFWavknd-5gc9Lw",
    authDomain: "chatapp-530cc.firebaseapp.com",
    databaseURL: "https://chatapp-530cc-default-rtdb.firebaseio.com",
    projectId: "chatapp-530cc",
    storageBucket: "chatapp-530cc.appspot.com",
    messagingSenderId: "78765808323",
    appId: "1:78765808323:web:e0353522444f6dd7bda076",
    measurementId: "G-1P24RK8K10"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const chatBox = document.getElementById('chat');
  const msgInput = document.getElementById('message');
  const usernameInput = document.getElementById('username');

  // Show incoming messages
  db.ref('messages').on('child_added', snapshot => {
    const msg = snapshot.val();
    const div = document.createElement('div');
    div.classList.add('message');
    div.innerHTML = `<span class="name">${msg.name}:</span> ${msg.text}`;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
  });

  function sendMessage() {
    const name = usernameInput.value.trim();
    const text = msgInput.value.trim();
    if (!name || !text) return;
    db.ref('messages').push({ name, text });
    msgInput.value = '';
  }
</script>

</body>
</html>
